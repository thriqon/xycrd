.TH XYCRD 1 "2021 May 14"
.SH NAME
xycrd \- Dynamically configure Xymon with Kubernetes CRD
.SH SYNOPSIS
.br
.B xycrd
[options]
.br
.B xycrd
--print-install-files
.SH DESCRIPTION
.B Xycrd
generates Xymon configuration snippets dynamically from information stored in a
Kubernetes cluster.
.SH OPTIONS
The options may be given in any order, before or after the filename.
.TP 12
--print-install-files
Print Kubernetes resources to setup
.B xycrd
in a new cluster. These YAMLs can be applied directly using
.EX
  xycrd --print-install-files | kubectl apply -f -
.EE
.TP
-h, --help
Print help information.
.TP
-V, --version
Prints version information.
.TP
--context=\fBCONTEXT
Select the context to be used inside the Kubeconfig used to connect to the
cluster. If not set, the default context for the given config file is used.
.TP
--kubeconfig=\fBKUBECONFIG_FILE
Overrides the location for the Kubeconfig file. By default, a synthetic in-cluster configuration or
.I $HOME/.kube/config
are used.
.TP
--output-file=\fBOUTPUT_FILE
Overrides the location of the target file generated by
.B xycrd.
.TP
--reload-delay=\fBSECONDS
The time to wait and batch updates to the
.B Xymon
configuration before committing the changes to disk and signalling the daemon.
The longer this time is, the longer it takes for updates to take effect, but
the load for
.B Xymon
might be reduced.
.TP
--xymond-pid=\fBPATH
Override the location of the
.B xymond
PID file.
.TP
--skip-sighup
Do not send a
.B SIGHUP
to
.B xymond
when a change has been detected and stored in the snippet file.
.SH EXAMPLE
.TP
This example monitors \fIhttps://icanhazip.com/\fR:
.BR
.EX
kind: EndpointMonitor
apiVersion: xycrd.thriqon.github.io/v1alpha1
metadata:
  name: icanhazip
spec:
  url: https://icanhazip.com/
.EE
.SH FILES
.TP 15
/etc/xymon/tasks.d/xycrd.cfg
The task file instructing
.B xymonlaunch
to start
.B xycrd.
.TP
/var/run/xymon/xymond.pid
The default file read by
.B xycrd
containing the PID of
.B xymond
to be signalled with
.I SIGHUP
on changes.
.TP
/var/lib/xycrd/xycrd.fg
Default file for generated config.
.TP
/var/run/secrets/kubernetes.io/serviceaccount/
Default in-cluster configuration files.
.TP
$HOME/.kube/config
Default out-of-cluster configuration files.
.SH SEE ALSO
hosts.cfg(5), xymon(7)
.SH AUTHOR
Jonas Weber
.SH BUGS
.B xycrd
does not clean up old data from
.B Xymon.
